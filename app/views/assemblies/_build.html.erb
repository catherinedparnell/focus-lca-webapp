<!--Angular js functions (<script> ... </script>>) should be placed inside ng-contoller and ng-app tag-->

<!-- Templates for Library (Left side bar)-->
<!--Top-level-->
<script type="text/ng-template" id="library-section.html">
  <h4>{{section.name}}</h4>
  <ul ng-init="list=section.columns">
    <li ng-repeat="item in list"
        dnd-disable-if="item.type == 'container-lib'"
        dnd-type="item.type"
        dnd-allowed-types="[No]"
        dnd-draggable="item"
        dnd-effect-allowed="copy"
        dnd-moved="list.splice($index, 1)"
        ng-class="{selected: list.selected === item}"
        ng-include="item.type + '.html'">
    </li>
  </ul>
</script>

<!-- List for library section -->
<script type="text/ng-template" id="list-lib.html">
  <ul>
    <li ng-repeat="item in list"
        dnd-draggable="item"
        dnd-effect-allowed="copy"
        dnd-moved="list.splice($index, 1)"
        dnd-selected="assembly.selected = item"
        ng-class="{selected: assembly.selected === item}"
        ng-include="item.type + '.html'">
    </li>
  </ul>
</script>

<!--Container for library section -->
<script type="text/ng-template" id="container-lib.html">
  <div class="container-element box box-blue">
    <h4>{{item.name}}</h4>
    <div class="column" ng-repeat="list in item.columns" ng-include="'list-lib.html'"></div>
    <div class="clearfix"></div>
  </div>
</script>

<!--Templates for Nested assembly-->
<!--List for building section -->
<script type="text/ng-template" id="list.html">
  <ul dnd-list="list" dnd-allowed-types="['process', 'container', 'material']">
    <li ng-repeat="item in list"
        dnd-draggable="item"
        dnd-effect-allowed="move"
        dnd-moved="list.splice($index, 1)"
        dnd-selected="assembly.selected = item"
        ng-class="{selected: assembly.selected === item}"
        ng-include="item.type + '.html'">
    </li>
  </ul>
</script>

<!--Container for building section -->
<script type="text/ng-template" id="container.html">
  <div class="container-element box box-blue">
    <h4>{{item.name}}</h4>
    <div class="column" ng-repeat="list in item.columns" ng-include="'list.html'"></div>
    <div class="clearfix"></div>
  </div>
</script>

<!--Material-->

<script type="text/ng-template" id="material.html">
  <div class="item material" style="display: inline-flex">
    <div>{{ item.name }}</div>
    <div class="details">
      : Quantity:
      <input type="number" min="1" max="100" value="{{ item.quantity }}">
      Units:
      <select>
        <option ng-repeat="unit in process_units"> {{ unit }} </option>
      </select>
    </div>
  </div>
</script>

<!--Process-->
<script type="text/ng-template" id="process.html">
  <div class="item process" style="display: inline-flex">
    <div>{{ item.name }}</div>
    <div class="details">
      : Quantity:
      <input type="number" min="1" max="100" value="{{ item.quantity }}">
      Units:
      <select>
        <option ng-repeat="unit in process_units"> {{ unit }} </option>
      </select>
    </div>
  </div>
</script>
<!--End of Angular app function definition-->